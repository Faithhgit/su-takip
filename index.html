<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="GÃ¼nlÃ¼k su tÃ¼ketiminizi takip edin ve saÄŸlÄ±klÄ± kalÄ±n">
    <meta name="theme-color" content="#3b82f6">
    <title>Su Takibi ğŸ’§</title>
    
    <!-- External Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Local Styles -->
    <link rel="stylesheet" href="styles.css">
</head>
<body class="dark-mode">
    <!-- Connection Status -->
    <div id="connectionStatus" class="connection-status online">ğŸŸ¢ Ã‡evrimiÃ§i</div>
    
    <!-- Theme Toggle -->
    <button class="theme-toggle" onclick="toggleTheme()" aria-label="Tema deÄŸiÅŸtir" title="Tema deÄŸiÅŸtir">ğŸŒ“</button>
    
    <div class="main-container">
        <!-- Hero Card -->
        <div class="hero-card">
            <center>
                <div id="success-badge">âœ¨ HEDEF TAMAMLANDI! ğŸ†</div>
            </center>
            
            <h1>
                Su Takibi <span class="edit-goal" onclick="changeGoal()" title="Hedefi deÄŸiÅŸtir">âœ</span>
            </h1>
            
            <!-- Water Sphere -->
            <div class="sphere" id="sphereContainer">
                <div id="waterLevel" class="water-layer">
                    <svg viewBox="0 0 120 28" preserveAspectRatio="none">
                        <path class="wave-1" d="M0 15 Q30 5 60 15 T120 15 V40 H0 Z" />
                        <path class="wave-2" d="M0 15 Q30 5 60 15 T120 15 V40 H0 Z" />
                    </svg>
                    <div id="waterBody" style="width:100%; height:100%;"></div>
                </div>
                <div id="percentText" class="percent-display">0%</div>
            </div>
            
            <!-- Total Display -->
            <h2 id="totalDisplay">0 / 2500 ml</h2>
            
            <!-- Drink Type Selection -->
            <div class="drink-chips">
                <button class="drink-chip active" data-drink="water" data-coefficient="1.0" onclick="selectDrink('water', 1.0)">
                    ğŸ’§ Su
                </button>
                <button class="drink-chip" data-drink="coffee" data-coefficient="0.8" onclick="selectDrink('coffee', 0.8)">
                    â˜• Kahve
                </button>
                <button class="drink-chip" data-drink="tea" data-coefficient="0.9" onclick="selectDrink('tea', 0.9)">
                    ğŸµ Ã‡ay
                </button>
                <button class="drink-chip" data-drink="juice" data-coefficient="0.95" onclick="selectDrink('juice', 0.95)">
                    ğŸ¥¤ Meyve Suyu
                </button>
            </div>
            
            <!-- Manual Input -->
            <div class="input-box">
                <input 
                    type="number" 
                    id="manualInput" 
                    placeholder="Miktar (ml)" 
                    inputmode="decimal"
                    min="1"
                    max="10000"
                    aria-label="Su miktarÄ± girin"
                >
                <button class="btn-main" onclick="addManual()" id="addButton">Ekle</button>
            </div>
            
            <!-- Date Selection -->
            <div class="date-selector">
                <button class="date-btn" onclick="toggleDateSelector()" id="dateToggleBtn">
                    ğŸ“… <span id="dateDisplay">BugÃ¼n</span>
                </button>
                <input 
                    type="date" 
                    id="dateInput" 
                    style="display: none;"
                    max=""
                    onchange="handleDateChange()"
                >
            </div>
            
            <!-- Quick Buttons -->
            <div class="quick-grid">
                <button class="btn-blue" onclick="handleWaterAdd(250, selectedDrink.type, selectedDrink.coefficient, selectedDate)" aria-label="250 ml ekle">ğŸ¥› 250ml</button>
                <button class="btn-blue" onclick="handleWaterAdd(500, selectedDrink.type, selectedDrink.coefficient, selectedDate)" aria-label="500 ml ekle">ğŸ’§ 500ml</button>
            </div>
            
            <!-- Additional Quick Buttons -->
            <div class="quick-grid" style="margin-top: 12px;">
                <button class="btn-blue" onclick="handleWaterAdd(750, selectedDrink.type, selectedDrink.coefficient, selectedDate)" aria-label="750 ml ekle">ğŸ¥¤ 750ml</button>
                <button class="btn-blue" onclick="handleWaterAdd(1000, selectedDrink.type, selectedDrink.coefficient, selectedDate)" aria-label="1000 ml ekle">ğŸ¶ 1000ml</button>
            </div>
            
            <!-- Settings Buttons -->
            <div style="display: flex; gap: 8px; justify-content: center; margin-top: 16px; flex-wrap: wrap;">
                <button onclick="toggleReminder()" class="btn-action" aria-label="HatÄ±rlatÄ±cÄ±larÄ± aÃ§/kapat" style="margin-top: 0;">
                    ğŸ”” HatÄ±rlatÄ±cÄ±lar
                </button>
                <button onclick="clearAll()" class="btn-action" aria-label="TÃ¼m verileri sÄ±fÄ±rla" style="margin-top: 0;">
                    Verileri SÄ±fÄ±rla
                </button>
            </div>
        </div>
        
        <!-- Side Panels -->
        <div style="flex: 1; display: flex; flex-direction: column; gap: 20px; min-width: 320px; width: 100%;">
            <!-- Statistics Panel -->
            <div class="glass-panel">
                <div class="section-header">ğŸ“Š Ä°statistikler</div>
                <div id="statsContainer">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-label">Bu Hafta</div>
                            <div class="stat-value">0</div>
                            <div class="stat-label">ml</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Bu Ay</div>
                            <div class="stat-value">0</div>
                            <div class="stat-label">ml</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">GÃ¼nlÃ¼k Ort.</div>
                            <div class="stat-value">0</div>
                            <div class="stat-label">ml</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Seri</div>
                            <div class="stat-value">0</div>
                            <div class="stat-label">gÃ¼n ğŸ”¥</div>
                        </div>
                    </div>
                </div>
                <div id="weeklyChartContainer"></div>
            </div>
            
            <!-- Recent Activities -->
            <div class="glass-panel">
                <div class="section-header">ğŸ•’ Son Ä°ÅŸlemler</div>
                <div id="recentContainer">
                    <div class="empty-state">
                        <div class="empty-state-icon">ğŸ’§</div>
                        <div class="empty-state-text">HenÃ¼z su eklenmedi</div>
                    </div>
                </div>
            </div>
            
            <!-- History Panel -->
            <div class="glass-panel">
                <div class="section-header">ğŸ—“ï¸ GeÃ§miÅŸ Raporu</div>
                <div id="historyContainer">
                    <div class="empty-state">
                        <div class="empty-state-icon">ğŸ“…</div>
                        <div class="empty-state-text">HenÃ¼z geÃ§miÅŸ veri yok</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Toast Container (will be created dynamically) -->
    
    <!-- Local Scripts -->
    <script src="app.js"></script>
</body>
</html>
